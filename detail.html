<script>
    const urlParams = new URLSearchParams(window.location.search);
    const prodId = urlParams.get('id');

    async function loadDetail() {
        try {
            const res = await fetch(`product_${prodId}.json?t=` + Date.now());
            const data = await res.json();
            
            document.getElementById('title').innerText = data.title;
            document.getElementById('total').innerText = data.totalSales;

            const memberList = document.getElementById('member-list');
            data.members.forEach(m => {
                const item = document.createElement('div');
                item.innerHTML = `<span>${m.name}</span>: <span class="text-sky-400 font-bold">${m.sales}</span>`;
                memberList.appendChild(item);
            });
        } catch (e) {
            document.body.innerHTML = "尚未取得該商品詳細數據，請先點進官網商品頁進行同步。";
        }
    }
    loadDetail();
</script>