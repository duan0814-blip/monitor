<script>
    async function loadEvents() {
        try {
            const res = await fetch('list.json?t=' + Date.now());
            const json = await res.json();
            // K-Monstar API 實際結構在 data.products.content 中
            const products = json.data?.products?.content || []; 
            const listContainer = document.getElementById('event-list');
            listContainer.innerHTML = '';

            products.forEach(p => {
                const card = document.createElement('div');
                card.className = 'bg-zinc-900 p-6 rounded-2xl border border-zinc-800 flex justify-between items-center mb-4';
                card.innerHTML = `
                    <div>
                        <h3 class="text-xl font-bold">${p.productName}</h3>
                        <p class="text-zinc-400">目前總銷量：<span class="text-amber-400 font-bold">${p.totalSales || 0}</span> 張</p>
                    </div>
                    <button onclick="location.href='detail.html?id=${p.productUuid}'" 
                            class="bg-violet-600 px-6 py-2 rounded-xl font-bold">查看成員戰報</button>
                `;
                listContainer.appendChild(card);
            });
        } catch (e) { console.error(e); }
    }
    loadEvents();
</script>