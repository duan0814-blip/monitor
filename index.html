<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>éŠ·é‡è§€æ¸¬ç«™</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-zinc-950 text-white min-h-screen p-8">
    <div class="max-w-3xl mx-auto">
        <h1 class="text-4xl font-black text-center mb-2 text-sky-400">éŠ·é‡è§€æ¸¬</h1>
        <p class="text-center text-emerald-400 font-mono text-sm mb-12">æ•¸æ“šä¾†æºï¼šK-MONSTAR åœ‹éš›</p>
        
        <div id="event-list" class="space-y-4">
            <div class="text-center animate-pulse text-zinc-500">ğŸ“¡ æ­£åœ¨åŒæ­¥æœ€æ–°æ•¸æ“šï¼Œè«‹ç¨å€™...</div>
        </div>
    </div>

    <script>
        async function loadEvents() {
            try {
                // åŠ å€‹éš¨æ©Ÿåƒæ•¸é˜²æ­¢ç€è¦½å™¨ç·©å­˜èˆŠè³‡æ–™
                const response = await fetch('list.json?t=' + Date.now());
                const json = await response.json();
                
                // æ ¸å¿ƒä¿®æ­£ï¼šæŠ“å– API å›å‚³çš„æ­£ç¢ºè·¯å¾‘
                const products = json.data?.products || json.products || [];
                const listContainer = document.getElementById('event-list');
                listContainer.innerHTML = '';

                if (products.length === 0) {
                    listContainer.innerHTML = '<div class="text-center py-20 text-zinc-600">ç›®å‰æš«ç„¡æ´»å‹•æ•¸æ“š</div>';
                    return;
                }

                products.forEach(p => {
                    // è‡ªå‹•å°é½Šæ¬„ä½ï¼šå„ªå…ˆå– productName
                    const pName = p.productName || p.name || "æœªçŸ¥å•†å“";
                    // æŠ“å–ã€Œå·²å”®éŠ·é‡ã€
                    const pSales = p.totalSales || p.sales || 0;
                    const pUuid = p.productUuid || p.id;

                    const card = document.createElement('div');
                    card.className = 'bg-zinc-900 p-6 rounded-2xl border border-zinc-800 hover:border-zinc-700 transition-all shadow-xl flex justify-between items-center';
                    card.innerHTML = `
                        <div>
                            <h3 class="text-xl font-bold mb-1">${pName}</h3>
                            <p class="text-zinc-400 text-sm">ç›®å‰ç¸½éŠ·é‡ï¼š<span class="text-amber-400 font-bold">${pSales}</span> å¼µ</p>
                        </div>
                        <button onclick="location.href='report.html?id=${pUuid}'" 
                                class="bg-violet-600 hover:bg-violet-500 px-6 py-2 rounded-xl font-bold transition-colors shadow-lg shadow-violet-900/20">
                            æŸ¥çœ‹æˆå“¡æˆ°å ±
                        </button>
                    `;
                    listContainer.appendChild(card);
                });
            } catch (e) {
                console.error(e);
                document.getElementById('event-list').innerHTML = '<div class="bg-red-900/20 text-red-400 p-4 rounded-xl border border-red-800 text-center">æ•¸æ“šè®€å–å¤±æ•—ï¼Œè«‹ç¢ºèª list.json æ˜¯å¦å·²ç”Ÿæˆã€‚</div>';
            }
        }
        loadEvents();
    </script>
</body>
</html>